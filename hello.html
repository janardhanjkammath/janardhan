<!doctype html>
<html>

<body onload="go();">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<canvas id="myCanvas" width="700" height="600" style="background-color:grey;border:1px solid #c3c3c3;">
Your browser does not support the HTML5 canvas tag.
</canvas>
<script>
var canvas=document.getElementById("myCanvas");
var ctx=canvas.getContext('2d');
var a=[[300,0,900],[500,0,900],[700,0,900],[900,0,900]];
var x=50;
var y=275;
var status=1;
var g=0;
var flag=0;
var count=0;
var k=2;
var top=0;


function go()
{
ctx.clearRect(0,0,700,600);
for(i=0;i<4;i++)
{
ctx.beginPath();
ctx.moveTo(0,a[i][0]);
ctx.lineTo(a[i][2]-40,a[i][0]);
ctx.moveTo(a[i][2]+40,a[i][0]);
ctx.lineTo(700,a[i][0]);
ctx.lineWidth=15;
ctx.stroke();
ctx.fill();
}
ctx.beginPath();
ctx.fillRect(x,y,20,20);
ctx.stroke();
if(status==1)
{
x+=1;
if(x>=675)
status=2;
}
if(status==2)
{
x-=1;
if(x<=0)
status=1;
}


if(a[0][0]<=0)
{
for(i=0;i<3;i++)
{
a[i][0]=a[i+1][0];
a[i][1]=a[i+1][1];
a[i][2]=a[i+1][2];
}
a[3][0]=800;
a[3][1]=0;
a[3][2]=900;
}
if(flag==1)
{
if(g<=30)
y-=3;
else y+=2;
for(i=0;i<4;i++)
{
a[i][0]-=2;
}

for(i=0;i<4;i++)
{
if(y-a[i][0]>10 && y-a[i][0]<=20 )
{
console.log("hai");
a[i][2]=x;
k=i;
}
}
if(y==a[k+1][0])
{
flag=0;
y=a[k+1][0]-25;
for(i=0;i<4;i++)
a[i][0]-=20;
g=0;
k=1;
y-=20;
}

g++;
}

l=setTimeout(go,20);
}

document.onkeydown = function(evt) 
{
        evt = evt || window.event;
        switch (evt.keyCode) 
	{
	
               
        case 38:
		clearTimeout(l);
		top=0;
		count=0;
		flag=1;
		go();
		break;
	}
        
};
</script>

</body>
</html>